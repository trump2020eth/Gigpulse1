import React, { useEffect, useState } from 'react';
import { View, StyleSheet } from 'react-native';
import { Button, Card, Chip, Text, TextInput } from 'react-native-paper';
import { getJSON, setJSON } from '../lib/storage';
export default function EarningsScreen(){ const [list,setList]=useState<any[]>([]); const [platform,setPlatform]=useState('DoorDash'); const [amount,setAmount]=useState(''); const [note,setNote]=useState(''); async function load(){ setList(await getJSON('earnings',[])); } useEffect(()=>{ load(); },[]); async function add(){ const val=parseFloat(amount); if(isNaN(val))return; const next=[{id:String(Date.now()),date:Date.now(),platform,amount:val,note},...list]; setList(next); await setJSON('earnings',next); setAmount(''); setNote(''); }
  return (<View style={styles.wrap}><Text variant="headlineSmall" style={styles.title}>Earnings</Text><View style={{flexDirection:'row',gap:8}}><Chip selected={platform==='DoorDash'} onPress={()=>setPlatform('DoorDash')}>DoorDash</Chip><Chip selected={platform==='UberEats'} onPress={()=>setPlatform('UberEats')}>Uber Eats</Chip></View><View style={{flexDirection:'row',gap:8,marginTop:8}}><TextInput mode="outlined" style={{flex:1}} keyboardType="decimal-pad" placeholder="Amount" value={amount} onChangeText={setAmount}/><TextInput mode="outlined" style={{flex:1}} placeholder="Note" value={note} onChangeText={setNote}/><Button mode="contained" onPress={add}>Add</Button></View><View style={{marginTop:12}}>{list.map(item=>(<Card key={item.id} style={{marginBottom:8,backgroundColor:'#141414'}}><Card.Title title={`${new Date(item.date).toLocaleDateString()} â€¢ ${item.platform}`} titleStyle={{color:'#fff'}}/><Card.Content><Text variant="titleLarge">${item.amount.toFixed(2)}</Text>{item.note?<Text style={{color:'#9aa'}}>{item.note}</Text>:null}</Card.Content></Card>))}</View><Button mode="contained-tonal" onPress={async()=>{ await setJSON('earnings',[]); load(); }}>Clear</Button></View>); }
const styles=StyleSheet.create({ wrap:{flex:1,backgroundColor:'#0b0b0b',padding:14,paddingTop:20}, title:{color:'#fff',marginBottom:10} });
